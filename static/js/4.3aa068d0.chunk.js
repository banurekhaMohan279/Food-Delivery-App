(this["webpackJsonpHunger-Buddy"]=this["webpackJsonpHunger-Buddy"]||[]).push([[4],{50:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},51:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return a}))},53:function(e,t,n){"use strict";n.r(t);var r=n(32),a=n(3),c=n(0),s=n.n(c),o=n(17),i=n(50),u=n(51),d=new(function(){function e(){Object(i.a)(this,e)}return Object(u.a)(e,[{key:"getAllRestaurants",value:function(e,t,n){return fetch("https://developers.zomato.com/api/v2.1/search?entity_id="+e+"&entity_type=city&start="+20*t+"&count=20&category=6",{method:"GET",headers:{"user-key":"4b22cef4949b6dd368a5b9a32cb83fbd"}}).then((function(e){return e.json()}))}}]),e}());function l(e,t,n){return function(r){return d.getAllRestaurants(e,t,n).then((function(e){e.error?r({type:"GET_RESTAURANTS_FAILURE",msg:"Get Restaurants Failure"}):"initLoad"===n?(r(function(e){return{type:"GET_INIT_RESTAURANTS_SUCCESS",response:e}}(e)),console.log("init restaurants")):(r(function(e){return{type:"GET_RESTAURANTS_SUCCESS",response:e}}(e)),console.log("subsequent restaurants load"))}))}}new(function(){function e(){Object(i.a)(this,e)}return Object(u.a)(e,[{key:"getRestaurantDetails",value:function(e){return fetch("https://developers.zomato.com/api/v2.1/restaurant?res_id="+e,{method:"GET",headers:{"user-key":"4b22cef4949b6dd368a5b9a32cb83fbd"}}).then((function(e){return e.json()}))}}]),e}());var b=n(28),f=n(20),j=n(1),m=n(2),h=n(4),O=n.n(h),g=n(5),p=n(29),v=function(e){return s.a.forwardRef((function(t,n){return s.a.createElement("div",Object(j.a)({},t,{ref:n,className:O()(t.className,e)}))}))},y=s.a.createContext(null);y.displayName="CardContext";var x=y,E=s.a.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.variant,c=e.as,o=void 0===c?"img":c,i=Object(m.a)(e,["bsPrefix","className","variant","as"]),u=Object(g.a)(n,"card-img");return s.a.createElement(o,Object(j.a)({ref:t,className:O()(a?u+"-"+a:u,r)},i))}));E.displayName="CardImg",E.defaultProps={variant:null};var R=E,N=v("h5"),T=v("h6"),C=Object(p.a)("card-body"),_=Object(p.a)("card-title",{Component:N}),S=Object(p.a)("card-subtitle",{Component:T}),w=Object(p.a)("card-link",{Component:"a"}),k=Object(p.a)("card-text",{Component:"p"}),I=Object(p.a)("card-header"),P=Object(p.a)("card-footer"),A=Object(p.a)("card-img-overlay"),U=s.a.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.bg,o=e.text,i=e.border,u=e.body,d=e.children,l=e.as,b=void 0===l?"div":l,f=Object(m.a)(e,["bsPrefix","className","bg","text","border","body","children","as"]),h=Object(g.a)(n,"card"),p=Object(c.useMemo)((function(){return{cardHeaderBsPrefix:h+"-header"}}),[h]);return s.a.createElement(x.Provider,{value:p},s.a.createElement(b,Object(j.a)({ref:t},f,{className:O()(r,h,a&&"bg-"+a,o&&"text-"+o,i&&"border-"+i)}),u?s.a.createElement(C,null,d):d))}));U.displayName="Card",U.defaultProps={body:!1},U.Img=R,U.Title=_,U.Subtitle=S,U.Body=C,U.Link=w,U.Text=k,U.Header=I,U.Footer=P,U.ImgOverlay=A;var G=U,L=Object(p.a)("card-deck"),B=n(6);t.default=function(){var e=Object(o.c)(),t=Object(B.f)(),n=Object(c.useState)(0),s=Object(r.a)(n,2),i=s[0],u=s[1],d=Object(o.d)((function(e){return e.restaurantsReducer.restaurants})),j=Object(o.d)((function(e){return e.getCitiesReducer.cities.location_suggestions[0].entity_id}));function m(n){e(m(n)).then((function(){t.push("/RestaurantDetails")}))}Object(c.useEffect)((function(){e(l(j,i,"initLoad")).then((function(){console.log("after mount");var e=new IntersectionObserver(O,{root:null,rootMargin:"20px",threshold:1});h.current&&e.observe(h.current)}))}),[]);var h=Object(c.useRef)(null);Object(c.useEffect)((function(){console.log("componentDidUpdate",i),e(l(j,i,"notInitLoad"))}),[i]);var O=function(e){e[0].isIntersecting&&u((function(e){return e+1}))};return Object(a.jsxs)("div",{className:"set-height restaurantsPage",children:[Object(a.jsx)(b.a,{}),Object(a.jsx)(f.a,{fluid:!0,style:{maxWidth:"1280px",margin:"0 auto"},children:Object(a.jsx)(L,{children:d&&d.map((function(e,t){return Object(a.jsxs)(G,{style:{"min-width":"18rem"},onClick:function(t){return m(e.restaurant.R.res_id)},children:[Object(a.jsx)(G.Img,{variant:"top",src:e.restaurant.thumb,alt:e.restaurant.name}),Object(a.jsxs)(G.Body,{children:[Object(a.jsx)(G.Title,{children:e.restaurant.name}),Object(a.jsxs)(G.Text,{children:["\u2606",e.restaurant.user_rating.aggregate_rating]})]})]},"restaurant"+t)}))})}),Object(a.jsx)("div",{className:"loading",ref:h,children:Object(a.jsx)("h2",{children:"Loading..."})})]})}}}]);
//# sourceMappingURL=4.3aa068d0.chunk.js.map