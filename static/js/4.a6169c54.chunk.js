(this["webpackJsonpHunger-Buddy"]=this["webpackJsonpHunger-Buddy"]||[]).push([[4],{50:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,"a",(function(){return n}))},51:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}r.d(t,"a",(function(){return a}))},54:function(e,t,r){"use strict";r.r(t);var n=r(32),a=r(3),c=r(0),s=r.n(c),o=r(18),i=r(50),u=r(51),d=new(function(){function e(){Object(i.a)(this,e)}return Object(u.a)(e,[{key:"getAllRestaurants",value:function(e,t,r){return fetch("https://developers.zomato.com/api/v2.1/search?entity_id="+e+"&entity_type=city&start="+20*t+"&count=20&category=6",{method:"GET",headers:{"user-key":"4b22cef4949b6dd368a5b9a32cb83fbd"}}).then((function(e){return e.json()}))}}]),e}());function l(e,t,r){return function(n){return d.getAllRestaurants(e,t,r).then((function(e){e.error?n({type:"GET_RESTAURANTS_FAILURE",msg:"Get Restaurants Failure"}):"initLoad"===r?(n(function(e){return{type:"GET_INIT_RESTAURANTS_SUCCESS",response:e}}(e)),console.log("init restaurants")):(n(function(e){return{type:"GET_RESTAURANTS_SUCCESS",response:e}}(e)),console.log("subsequent restaurants load"))}))}}var f=new(function(){function e(){Object(i.a)(this,e)}return Object(u.a)(e,[{key:"getRestaurantDetails",value:function(e){return fetch("https://developers.zomato.com/api/v2.1/restaurant?res_id="+e,{method:"GET",headers:{"user-key":"4b22cef4949b6dd368a5b9a32cb83fbd"}}).then((function(e){return e.json()}))}}]),e}());var b=r(28),j=r(17),m=r(1),h=r(2),O=r(4),p=r.n(O),g=r(5),v=r(29),y=function(e){return s.a.forwardRef((function(t,r){return s.a.createElement("div",Object(m.a)({},t,{ref:r,className:p()(t.className,e)}))}))},x=s.a.createContext(null);x.displayName="CardContext";var E=x,R=s.a.forwardRef((function(e,t){var r=e.bsPrefix,n=e.className,a=e.variant,c=e.as,o=void 0===c?"img":c,i=Object(h.a)(e,["bsPrefix","className","variant","as"]),u=Object(g.a)(r,"card-img");return s.a.createElement(o,Object(m.a)({ref:t,className:p()(a?u+"-"+a:u,n)},i))}));R.displayName="CardImg",R.defaultProps={variant:null};var T=R,S=y("h5"),N=y("h6"),_=Object(v.a)("card-body"),C=Object(v.a)("card-title",{Component:S}),A=Object(v.a)("card-subtitle",{Component:N}),I=Object(v.a)("card-link",{Component:"a"}),k=Object(v.a)("card-text",{Component:"p"}),w=Object(v.a)("card-header"),U=Object(v.a)("card-footer"),P=Object(v.a)("card-img-overlay"),G=s.a.forwardRef((function(e,t){var r=e.bsPrefix,n=e.className,a=e.bg,o=e.text,i=e.border,u=e.body,d=e.children,l=e.as,f=void 0===l?"div":l,b=Object(h.a)(e,["bsPrefix","className","bg","text","border","body","children","as"]),j=Object(g.a)(r,"card"),O=Object(c.useMemo)((function(){return{cardHeaderBsPrefix:j+"-header"}}),[j]);return s.a.createElement(E.Provider,{value:O},s.a.createElement(f,Object(m.a)({ref:t},b,{className:p()(n,j,a&&"bg-"+a,o&&"text-"+o,i&&"border-"+i)}),u?s.a.createElement(_,null,d):d))}));G.displayName="Card",G.defaultProps={body:!1},G.Img=T,G.Title=C,G.Subtitle=A,G.Body=_,G.Link=I,G.Text=k,G.Header=w,G.Footer=U,G.ImgOverlay=P;var L=G,D=Object(v.a)("card-deck"),B=r(6);t.default=function(){var e=Object(o.c)(),t=Object(B.f)(),r=Object(c.useState)(0),s=Object(n.a)(r,2),i=s[0],u=s[1],d=Object(o.d)((function(e){return e.restaurantsReducer.restaurants})),m=JSON.parse(localStorage.getItem("locationId"));Object(c.useEffect)((function(){e(l(m,i,"initLoad")).then((function(){var e=new IntersectionObserver(O,{root:null,rootMargin:"20px",threshold:1});h.current&&e.observe(h.current)}))}),[]);var h=Object(c.useRef)(null);Object(c.useEffect)((function(){console.log("componentDidUpdate",i),e(l(m,i,"notInitLoad"))}),[i]);var O=function(e){e[0].isIntersecting&&u((function(e){return e+1}))};function p(r){e(function(e){return function(t){return f.getRestaurantDetails(e).then((function(e){e.error?t({type:"GET_RESTAURANT_DETAILS_FAILURE",msg:"Get Restaurant Details Failure"}):t(function(e){return{type:"GET_RESTAURANT_DETAILS_SUCCESS",response:e}}(e))}))}}(r)).then((function(){t.push("/RestaurantDetails")}))}return Object(a.jsxs)("div",{className:"set-height restaurantsPage",children:[Object(a.jsx)(b.a,{}),Object(a.jsx)(j.a,{fluid:!0,style:{maxWidth:"1280px",margin:"0 auto"},children:Object(a.jsx)(D,{children:d&&d.map((function(e,t){return Object(a.jsxs)(L,{style:{minWidth:"18rem"},onClick:function(t){return p(e.restaurant.R.res_id)},children:[Object(a.jsx)(L.Img,{variant:"top",src:e.restaurant.thumb,alt:e.restaurant.name}),Object(a.jsxs)(L.Body,{children:[Object(a.jsx)(L.Title,{children:e.restaurant.name}),Object(a.jsxs)(L.Text,{children:["\u2606",e.restaurant.user_rating.aggregate_rating]})]})]},"restaurant"+t)}))})}),Object(a.jsx)("div",{className:"loading",ref:h,children:Object(a.jsx)("h2",{children:"Loading..."})})]})}}}]);
//# sourceMappingURL=4.a6169c54.chunk.js.map