(this["webpackJsonpHunger-Buddy"]=this["webpackJsonpHunger-Buddy"]||[]).push([[4],{49:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return r}))},50:function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",(function(){return a}))},53:function(t,e,n){"use strict";n.r(e);var r=n(29),a=n(3),s=n(0),u=n(15),c=n(49),i=n(50),o=new(function(){function t(){Object(c.a)(this,t)}return Object(i.a)(t,[{key:"getAllRestaurants",value:function(t,e,n){return fetch("https://developers.zomato.com/api/v2.1/search?entity_id="+t+"&entity_type=city&start="+20*e+"&count=20&category=6",{method:"GET",headers:{"user-key":"4b22cef4949b6dd368a5b9a32cb83fbd"}}).then((function(t){return t.json()}))}}]),t}());function l(t,e,n){return function(r){return o.getAllRestaurants(t,e,n).then((function(t){t.error?r({type:"GET_RESTAURANTS_FAILURE",msg:"Get Restaurants Failure"}):"initLoad"===n?(r(function(t){return{type:"GET_INIT_RESTAURANTS_SUCCESS",response:t}}(t)),console.log("init restaurants")):(r(function(t){return{type:"GET_RESTAURANTS_SUCCESS",response:t}}(t)),console.log("subsequent restaurants load"))}))}}new(function(){function t(){Object(c.a)(this,t)}return Object(i.a)(t,[{key:"getRestaurantDetails",value:function(t){return fetch("https://developers.zomato.com/api/v2.1/restaurant?res_id="+t,{method:"GET",headers:{"user-key":"4b22cef4949b6dd368a5b9a32cb83fbd"}}).then((function(t){return t.json()}))}}]),t}());var f=n(26),d=n(6);e.default=function(){var t=Object(u.c)(),e=Object(d.f)(),n=Object(s.useState)(0),c=Object(r.a)(n,2),i=c[0],o=c[1],b=Object(u.d)((function(t){return t.restaurantsReducer.restaurants})),h=Object(u.d)((function(t){return t.getCitiesReducer.cities.location_suggestions[0].entity_id}));function j(n){t(j(n)).then((function(){e.push("/RestaurantDetails")}))}Object(s.useEffect)((function(){t(l(h,i,"initLoad")).then((function(){console.log("after mount");var t=new IntersectionObserver(m,{root:null,rootMargin:"20px",threshold:1});console.log("loader",p,p.current),p.current&&t.observe(p.current)}))}),[]);var g={height:"250px"},p=Object(s.useRef)(null);Object(s.useEffect)((function(){console.log("componentDidUpdate",i),t(l(h,i,"notInitLoad"))}),[i]);var m=function(t){t[0].isIntersecting&&o((function(t){return t+1}))};return Object(a.jsxs)("div",{className:"retaurantsPage",children:[Object(a.jsx)(f.a,{}),Object(a.jsx)("div",{className:"restaurantList",style:{maxWidth:"1280px",margin:"0 auto"},children:b&&b.map((function(t,e){return Object(a.jsxs)("div",{className:"restaurant",style:g,onClick:function(e){return j(t.restaurant.R.res_id)},children:[Object(a.jsx)("img",{src:t.restaurant.thumb,alt:t.restaurant.name,className:"restaurantThumbNail"}),Object(a.jsxs)("h4",{className:"restaurantName",children:[" ",t.restaurant.name," "]}),Object(a.jsxs)("span",{children:["\u2606",t.restaurant.user_rating.aggregate_rating]})]},"restaurant"+e)}))}),Object(a.jsx)("div",{className:"loading",ref:p,children:Object(a.jsx)("h2",{children:"Loading..."})})]})}}}]);
//# sourceMappingURL=4.3874598a.chunk.js.map